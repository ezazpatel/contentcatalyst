
> rest-express@1.0.0 dev
✅ Scheduler module loaded and ready
Running migrations...
Table blog_posts already exists
Column wordpress_url already exists
Column affiliate_links already exists
All migrations completed
Checking for scheduled posts at 3/27/2025, 8:43:41 AM
Current test mode status: true
8:43:42 AM [express] serving on port 5000
Found 0 posts to process
8:43:46 AM [express] GET /api/settings 200 in 24ms :: {"id":1,"test_mode":true,"last_modified":"2025…
8:43:46 AM [express] GET /api/settings 304 in 24ms :: {"id":1,"test_mode":true,"last_modified":"2025…
8:43:48 AM [express] GET /api/settings 304 in 27ms :: {"id":1,"test_mode":true,"last_modified":"2025…
8:43:48 AM [express] GET /api/posts 200 in 228ms :: [{"id":31,"title":"Calgary to Vancouver Road Tri…
8:44:26 AM [express] GET /api/settings 304 in 108ms :: {"id":1,"test_mode":true,"last_modified":"202…
8:44:26 AM [express] GET /api/posts 304 in 221ms :: [{"id":31,"title":"Calgary to Vancouver Road Tri…
8:44:30 AM [express] POST /api/posts 200 in 43ms :: {"id":106,"title":"Ultimate Guide to Whistler He…
8:44:30 AM [express] GET /api/posts 200 in 129ms :: [{"id":31,"title":"Calgary to Vancouver Road Tri…
8:44:36 AM [express] GET /api/settings 304 in 25ms :: {"id":1,"test_mode":true,"last_modified":"2025…
8:44:36 AM [express] GET /api/posts 304 in 131ms :: [{"id":31,"title":"Calgary to Vancouver Road Tri…
8:44:43 AM [express] GET /api/posts/105 200 in 24ms :: {"id":105,"title":"Blog Post About whistler h…
Checking for scheduled posts at 3/27/2025, 8:45:42 AM
Current test mode status: true
Found 1 posts to process
Processing post ID 106: whistler heli tours
Searching Viator products: { keyword: 'whistler heli tours', limit: 10, apiKey: true }
Viator API response: {
  status: 400,
  statusText: '',
  body: '{"code":"BAD_REQUEST","message":"Missing filtering","timestamp":"2025-03-27T08:45:42.779604890Z","trackingId":"228A1B86:86B2_0A280EB3:01BB_67E51036_4DF6E1:285599"}'
}
Error searching Viator products: Error: Viator search failed (400): {"code":"BAD_REQUEST","message":"Missing filtering","timestamp":"2025-03-27T08:45:42.779604890Z","trackingId":"228A1B86:86B2_0A280EB3:01BB_67E51036_4DF6E1:285599"}
    at searchViatorProducts (/home/runner/workspace/server/services/viator-search.ts:45:13)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async generateContent (/home/runner/workspace/server/scheduler.ts:66:26)
    at async Timeout.checkScheduledPosts (/home/runner/workspace/server/scheduler.ts:660:27)
Step 1: Generating title and outline...
Failed to parse outline JSON: SyntaxError: Expected ',' or ']' after array element in JSON at position 575
    at JSON.parse (<anonymous>)
    at generateContent (/home/runner/workspace/server/scheduler.ts:133:30)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async Timeout.checkScheduledPosts (/home/runner/workspace/server/scheduler.ts:660:27)
Step 2: Generating introduction...
Step 4: Generating conclusion...
Crawling affiliate links for images...
Added 0 affiliate product images to the content
Generated content with 295 words
Successfully generated content for post ID 106. Status: draft (test mode)
⚠️ Test mode is ON or WordPress credentials not configured. Post ID 106 was generated but NOT published to WordPress.
8:46:04 AM [express] GET /api/settings 304 in 33ms :: {"id":1,"test_mode":true,"last_modified":"2025…
8:46:05 AM [express] GET /api/posts 200 in 219ms :: [{"id":31,"title":"Calgary to Vancouver Road Tri…
Checking for scheduled posts at 3/27/2025, 8:47:55 AM
Current test mode status: true
Found 0 posts to process
Checking for scheduled posts at 3/27/2025, 8:49:56 AM
Current test mode status: true
Found 0 posts to process
8:51:47 AM [express] GET /api/settings 304 in 2576ms :: {"id":1,"test_mode":true,"last_modified":"20…
8:51:48 AM [express] GET /api/posts 304 in 2717ms :: [{"id":31,"title":"Calgary to Vancouver Road Tr…
8:51:49 AM [express] POST /api/posts 200 in 34ms :: {"id":107,"title":"Ultimate Guide to Whistler He…
8:51:49 AM [express] GET /api/posts 200 in 106ms :: [{"id":31,"title":"Calgary to Vancouver Road Tri…
8:51:52 AM [express] GET /api/posts/106 200 in 33ms :: {"id":106,"title":"Blog Post About whistler h…
8:51:58 AM [express] GET /api/posts/105 304 in 26ms :: {"id":105,"title":"Blog Post About whistler h…
Checking for scheduled posts at 3/27/2025, 8:51:58 AM
Current test mode status: true
Found 0 posts to process
